\chapter{Conclusion}

In the following chapter, a discussion about the design of TextIt is given, along with the future work and summary of what has been done during the process of writing this thesis. The discussion section describes the advantages and disadvantages of the framework, in addition to the suggestions given on how the system can be improved to have a better user experience. Future work would increase the usability of the system, and make the development of e-textile application easier and faster. 


\section{Discussion}
TextIt is decomposed into seven components (Gathering Controller, Etextile Communication Selection, View Controller, Interactex Server Controller, BLE-Firmata Controller, JavaScript Runner, File), where every component is responsible for one aspect of the system (e-textile communication, user input handling, data receiving and manipulating).
\\ 

	An advantage of this design is that the implementation of every component can be done independently, as long as the interface of the component does not change. The components are implemented using the design-by-contract approach. The key concept of design-by-contract is viewing the relationship between a class and its clients as a formal agreement, expressing each party's rights and obligations. The existence of a contract also means that every component can be developed by a different person or a team, without knowing anything about the functioning of other components. \\
	
Another advantage of this design is that the components and the user code can easily be shared with other devices and applications (like Interactex) without the need for changing the components themselves. The advantage that emerges from the ease of distribution and the fact that the interpreted language context are stateless, is that all the components and user code can be replicated and deployed on multiple applications and devices.\\

	A disadvantage of this design is that the user code is executed at the background in another thread in every 2 seconds. User input or data traffic load influences the response time of the system. The bigger the data load is or the more the user input is, the longer the response time of the system will be. Currently, for the use cases the response time of the system is around 1 second which is considered as a normal waiting time. Another main reason for the possible late response time is that for the simplicity of the thesis in every user change the whole user input is executed from the beginning except the visualization codes. If a more complex system is designed then because of the computation time and the re-execution of the user input the response time will be increased. \\ 
 
 The response time is expected to decrease by understanding the change in the user code and execute the rest of the code instead of executing the whole code. Using this approach, the overload on the background thread and the computation load will be minimized. For the proposed solution there is no architecture change is required. There might be the case that the new components can be added but that does not require a change in the architecture. The proposed two architecture can continue to be used.  

\insertfigure{images/mcan/SystemDesign/ComponentDiagram.jpg}{Middleware Architecture of TextIt}{Middleware}{1.00}

		\insertfigure{images/mcan/SystemDesign/LayeredDiagram.jpg}{Layered Architecture of TextIt}{Layered}{0.90}




\section{Future Work}

The emphasis of the future work should be on increasing the usability of the system and user experience of the e-textile developers. The usability of the system and comfort of the inhabitants can be increased by the following activities:

\begin{itemize}
\item implementing the missing functionality
\item adding more pre-defined algorithms
\item adding more communication protocols to support more e-textile devices
\item full integration with Interactex or with other applications
\item adding data visualization with the reference video
\end{itemize}

\subsection{Implementing the Missing Functionality}

Adding, removing and changing the name or the folder of the files from the system is not fully functional. In order to give full experience of the development environment these functionality should be implemented. \\

Also as discussed in Discussion section, instead of executing the whole code in every change, the user change should be identified and execute the code respectfully. This should increase the efficiency and decrease the response time. So that the behavior would be more convenient.
	
\subsection{Adding More Pre-defined Algorithms}

Right now there are three different main algorithm sections are included in the system (Filter, Feature Extraction and Machine Learning). These are the ones that are extracted from the use cases. However this sections can later be increased with new groups. So that the developer can find whatever he needs in the system and does not have to think about how to implement it. \\

Moreover even for the three algorithm sections, not every algorithms are implemented. For example for filtering low-pass filter, high-pass filter and RC filter are implemented. There can be find many other filtering algorithms for the data. Same applies for the feature extraction and machine learning algorithms.


\subsection{New Communication Protocols for New Devices}
As stated in the definition of an e-textile development environment in the introduction of this thesis, the system has to be able to communicate with different e-textile devices. In order to do this BLE and Firmata protocols are used.	\\ 

For the expansion of supported e-textile devices, the addition of new communication types is inevitable. By implementing more communication protocols, the more e-textile device can be connected to the system. This gives developers freedom when they choose a device. \\

Addition of every new communication type requires adding new parsing method if the protocols are using different representation for the data.

\subsection{Full Integration with Interactex or with Other Applications}
In this current situation TextIt can be able to send a sample code to Interactex as a custom component. As the system gets improved and added new components the counter components should also be added to Interactex. Moreover, the code should be cleaned from custom code that are used to visualize or to connect to e-textile device before sending to the Interactex. The custom visualization code or connection code are defined in the system so that they can be identified and cleaned from the code easily. All the communication and uploading features are already added to the system the missing part is the cleaning the code from custom methods before uploading it.\\ 

The integration with Interactex can only be an example that the system can be used with other e-textile development environments if needed. The new interactions can be added to the system independently thanks to architecture.

\subsection{Data Visualization with the Reference Video}


\section{Summary}
During the course of writing this thesis, a framework (\sife\ - \seif) for controlling a smart environment was designed and implemented. The emphasis was placed on designing and implementing a framework which would provide a fixture response time of less than 2 seconds and the system response time of 5 seconds in case of an error. Also, the emphasis was on enabling the \seif\ components to be distributed to multiple machines. The \seif\ is made up of six web services, with every service performing a different task in the system. Web services communicate with each other over a message-oriented middleware which facilitates addition of new modules to the system, and makes the system more suitable for distribution. \\ 

The \seif\ enables the user to control fixtures in the smart environment, and to get the information about the state of the environment. Besides that, the \seif\ tracks the changes in the smart environment (changes of fixture states), tracks user activities, provides user authentication and access control and enables the smart environment automation based on the defined rules. The \seif\ enables the controlling of in-wall switches, smart light bulbs, addressable plugs and tracking of the window sensors' status. Other devices were not available during the course of writing this thesis.\\

\seif\ does not yet add the "smartness" to the environment. Nevertheless, the design of the \seif\ supports development of components that are discussed in the \textit{Future Work} section that will add this kind of functionality to the environment. The data gathered by the \seif, along with the ability provided by the \seif\ to control the devices in the environment, enables the research in the smart environment automation and control areas. As a result of this research, new components, which would add the "smartness" to the environments in which the \seif\ and the fixtures are installed, could be added.



